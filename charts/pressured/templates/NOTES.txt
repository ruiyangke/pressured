ğŸ‰ pressured has been installed!

{{- if eq .Values.mode "cluster" }}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
MODE: Cluster (central monitoring)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

The pressured is monitoring memory usage of pods cluster-wide.

ğŸ“Š Check Status:
  kubectl get pods -n {{ .Release.Namespace }} -l app.kubernetes.io/name={{ include "pressured.name" . }}

ğŸ“œ View Logs:
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name={{ include "pressured.name" . }} -f

{{- else }}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
MODE: Sidecar
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Note: This chart does not deploy anything in sidecar mode.
Use the pressured container image directly in your pod specs:

  containers:
  - name: pressured
    image: {{ .Values.image.repository }}:{{ .Values.image.tag | default .Chart.AppVersion }}
    args: ["--config", "/etc/pressured/config.json"]
    volumeMounts:
    - name: cgroup
      mountPath: /sys/fs/cgroup
      readOnly: true
{{- end }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
CONFIGURATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Thresholds:
  â€¢ Warning:    {{ .Values.config.thresholds.warn_percent }}%
  â€¢ Critical:   {{ .Values.config.thresholds.critical_percent }}%
  â€¢ Hysteresis: {{ .Values.config.thresholds.hysteresis_percent }}%
  â€¢ Cooldown:   {{ .Values.config.thresholds.cooldown_seconds }}s

{{- if .Values.config.source.kubelet.namespace_filter }}
Namespace Filter: {{ .Values.config.source.kubelet.namespace_filter }}
{{- end }}

{{- if .Values.config.source.kubelet.label_selector }}
Label Selector: {{ .Values.config.source.kubelet.label_selector }}
{{- end }}

{{- if .Values.lua.enabled }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
LUA PLUGIN: âœ“ Enabled
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Scripts Directory: {{ .Values.lua.scriptsDir }}
Timeout: {{ .Values.lua.timeoutMs }}ms
{{- if .Values.lua.scripts }}
Loaded Scripts:
{{- range $name, $_ := .Values.lua.scripts }}
  â€¢ {{ $name }}
{{- end }}
{{- end }}
{{- if .Values.lua.inlineScript }}
Using inline script
{{- end }}
{{- end }}

{{- if .Values.storage.enabled }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
STORAGE: âœ“ {{ .Values.storage.backend | upper }}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{{- if eq .Values.storage.backend "local" }}
Path: {{ .Values.storage.local.path }}
{{- if .Values.persistence.enabled }}
Persistent Volume: {{ .Values.persistence.size }}
{{- else }}
âš ï¸  Using emptyDir - data will be lost on pod restart!
    Enable persistence for production: --set persistence.enabled=true
{{- end }}
{{- else if eq .Values.storage.backend "s3" }}
Bucket: s3://{{ .Values.storage.s3.bucket }}/{{ .Values.storage.s3.prefix }}
Region: {{ .Values.storage.s3.region }}
{{- if .Values.storage.s3.irsaRoleArn }}
Credentials: IRSA ({{ .Values.storage.s3.irsaRoleArn }})
{{- else if .Values.storage.s3.existingSecret }}
Credentials: From secret '{{ .Values.storage.s3.existingSecret }}'
{{- else }}
âš ï¸  No credentials configured! Set storage.s3.irsaRoleArn (recommended) or storage.s3.existingSecret
{{- end }}
{{- else if eq .Values.storage.backend "gcs" }}
Bucket: gs://{{ .Values.storage.gcs.bucket }}/{{ .Values.storage.gcs.prefix }}
{{- if .Values.storage.gcs.existingSecret }}
Credentials: From secret '{{ .Values.storage.gcs.existingSecret }}'
{{- else }}
âš ï¸  No credentials configured! Set storage.gcs.existingSecret
{{- end }}
{{- else if eq .Values.storage.backend "azure" }}
Container: https://{{ .Values.storage.azure.storageAccount }}.blob.core.windows.net/{{ .Values.storage.azure.container }}/{{ .Values.storage.azure.prefix }}
{{- if .Values.storage.azure.existingSecret }}
Credentials: From secret '{{ .Values.storage.azure.existingSecret }}'
{{- else }}
âš ï¸  No credentials configured! Set storage.azure.existingSecret
{{- end }}
{{- end }}
{{- else }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
STORAGE: âœ— Disabled
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

To enable storage for heap dumps:

Local storage:
  helm upgrade {{ .Release.Name }} pressured/pressured \
    --set storage.enabled=true \
    --set persistence.enabled=true

S3 storage (with IRSA - recommended for EKS):
  helm upgrade {{ .Release.Name }} pressured/pressured \
    --set storage.enabled=true \
    --set storage.backend=s3 \
    --set storage.s3.bucket=my-bucket \
    --set storage.s3.irsaRoleArn=arn:aws:iam::123456789012:role/pressured-s3

S3 storage (with static credentials):
  helm upgrade {{ .Release.Name }} pressured/pressured \
    --set storage.enabled=true \
    --set storage.backend=s3 \
    --set storage.s3.bucket=my-bucket \
    --set storage.s3.existingSecret=aws-credentials
{{- end }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
DOCUMENTATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š Full documentation: https://github.com/ruiyangke/pressured
ğŸ› Report issues: https://github.com/ruiyangke/pressured/issues
